# ============================================
# PPOB.ID Backend - Environment Variables
# ============================================

# ============================================
# APPLICATION
# ============================================
APP_NAME=ppob.id
APP_ENV=development
APP_PORT=8080
APP_URL=http://localhost:8080

# ============================================
# DATABASE (PostgreSQL)
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ppob_db
DB_USER=ppob_user
DB_PASSWORD=ppob_secret
DB_SSL_MODE=disable
DB_MAX_CONNECTIONS=100
DB_MAX_IDLE_CONNECTIONS=10

# ============================================
# REDIS (Cache & Session)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# JWT (Authentication)
# ============================================
JWT_SECRET=super-secret-jwt-key-change-this-in-production
JWT_ACCESS_TTL=900
JWT_REFRESH_TTL=2592000
TEMP_TOKEN_TTL=900

# JWT_ACCESS_TTL: Access token lifetime in seconds (default: 900 = 15 minutes)
# JWT_REFRESH_TTL: Refresh token lifetime in seconds (default: 2592000 = 30 days)
# TEMP_TOKEN_TTL: Temporary token lifetime in seconds (default: 900 = 15 minutes)

# ============================================
# OTP (One-Time Password)
# ============================================
OTP_LENGTH=6
OTP_TTL=900
OTP_MAX_ATTEMPTS=5
OTP_MAX_RESEND=3
OTP_RESEND_COOLDOWN=60

# OTP_LENGTH: OTP code length (default: 4 digits)
# OTP_TTL: OTP lifetime in seconds (default: 900 = 15 minutes)
# OTP_MAX_ATTEMPTS: Maximum verification attempts (default: 5)
# OTP_MAX_RESEND: Maximum resend attempts (default: 3)
# OTP_RESEND_COOLDOWN: Cooldown between resend in seconds (default: 60 = 1 minute)

# ============================================
# WHATSAPP (Meta Business API)
# ============================================
WA_API_URL=https://graph.facebook.com/v18.0
WA_PHONE_NUMBER_ID=your_whatsapp_phone_number_id
WA_ACCESS_TOKEN=your_whatsapp_access_token
WA_OTP_TEMPLATE_NAME=otp_verification
WA_OTP_TEMPLATE_LANGUAGE=id

# Instructions:
# 1. Register at https://developers.facebook.com/
# 2. Create Meta Business App
# 3. Enable WhatsApp Business API
# 4. Get Phone Number ID from WhatsApp Business settings
# 5. Generate Access Token (permanent token recommended)
# 6. Create OTP message template and get approval

# ============================================
# FAZPASS (OTP Gateway Alternative)
# ============================================
FAZPASS_API_URL=https://api.fazpass.com
FAZPASS_MERCHANT_KEY=your_fazpass_merchant_key
FAZPASS_GATEWAY_KEY=your_fazpass_gateway_key

# Instructions:
# 1. Register at https://fazpass.com/
# 2. Create application
# 3. Get Merchant Key and Gateway Key from dashboard
# 4. Configure OTP channels (WhatsApp/SMS/Email)

# ============================================
# BREVO (Email Service - formerly Sendinblue)
# ============================================
BREVO_API_URL=https://api.brevo.com/v3
BREVO_API_KEY=your_brevo_api_key
BREVO_SENDER_EMAIL=noreply@ppob.id
BREVO_SENDER_NAME=PPOB.ID

# Instructions:
# 1. Register at https://www.brevo.com/
# 2. Create SMTP & API key from Settings > SMTP & API
# 3. Verify sender email address
# 4. Get API v3 key

# ============================================
# GERBANG API (Payment Gateway & PPOB Provider)
# ============================================
GERBANG_BASE_URL=https://api.gtd.co.id
GERBANG_CLIENT_ID=your_gerbang_client_id
GERBANG_CLIENT_SECRET=your_gerbang_client_secret
GERBANG_CALLBACK_SECRET=your_gerbang_webhook_secret
GERBANG_TIMEOUT=30

# GERBANG_TIMEOUT: API request timeout in seconds (default: 30)
# GERBANG_CALLBACK_SECRET: Secret for webhook HMAC signature verification

# Instructions:
# 1. Register at https://gtd.co.id/ (or contact sales)
# 2. Get Client ID and Client Secret from dashboard
# 3. Generate callback secret for webhook verification
# 4. Configure webhook URL in Gerbang dashboard

# ============================================
# PRODUCT SYNC JOB
# ============================================
PRODUCT_SYNC_ENABLED=true
PRODUCT_SYNC_INTERVAL=15
PRODUCT_SYNC_ON_START=true

# PRODUCT_SYNC_ENABLED: Enable/disable product sync job (default: true)
# PRODUCT_SYNC_INTERVAL: Sync interval in minutes (default: 15)
# PRODUCT_SYNC_ON_START: Run sync immediately on app startup (default: true)

# ============================================
# BANK CODE SYNC JOB
# ============================================
BANK_CODE_SYNC_ENABLED=true
BANK_CODE_SYNC_INTERVAL=4320
BANK_CODE_SYNC_ON_START=true

# BANK_CODE_SYNC_ENABLED: Enable/disable bank code sync job (default: true)
# BANK_CODE_SYNC_INTERVAL: Sync interval in minutes (default: 4320 = 72 hours = 3 days)
# BANK_CODE_SYNC_ON_START: Run sync immediately on app startup (default: true)

# S3 Configuration
# AWS S3 Configuration (KYC files only - KTP, face photos)
# Region: ap-southeast-3 (Jakarta) for data residency
# Note: Liveness uses Gerbang API, not S3 directly
S3_BUCKET=ppob-id-kyc
S3_REGION=ap-southeast-3
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BASE_URL=https://ppob-id-kyc.s3.ap-southeast-3.amazonaws.com

# R2 Cloudflare (public assets - logos, banners, avatars)
# Configured via Cloudflare dashboard, domain: cdn.ppob.id
# No env vars needed - accessed via public CDN URL

# Territory Sync Configuration
TERRITORY_SYNC_INTERVAL_DAYS=30
TERRITORY_SYNC_ON_START=false
TERRITORY_SYNC_ENABLED=false

# ============================================
# NOTES
# ============================================
# 
# PRODUCTION RECOMMENDATIONS:
# 1. Change all default secrets and passwords
# 2. Use strong JWT_SECRET (min 32 characters, random)
# 3. Set APP_ENV=production
# 4. Enable DB_SSL_MODE=require for production database
# 5. Use Redis password (REDIS_PASSWORD)
# 6. Configure proper APP_URL with your domain
# 7. Store sensitive values in secret manager (AWS Secrets Manager, Vault, etc)
# 8. Never commit .env file to git (already in .gitignore)
#
# DEVELOPMENT QUICK START:
# 1. Copy this file: cp .env.example .env
# 2. Update database credentials if needed
# 3. Add your API keys for WhatsApp/Fazpass/Brevo/Gerbang
# 4. Run: go run cmd/api/main.go
#
# DOCKER QUICK START:
# 1. Copy this file: cp .env.example .env
# 2. Run: docker-compose up -d
# 3. Database and Redis will start automatically
# 4. App will be available at http://localhost:8080
#
# ============================================
